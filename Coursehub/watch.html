<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Enrolled Courses</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="p-5 bg-light">
  <div class="container">
    <h2 class="mb-4">My Enrolled Courses</h2>
    <div id="courseList" class="row"></div>
    <div id="videoContainer" class="mt-5 text-center"></div>
  </div>

  <script>
    const email = prompt("Enter your email to view your enrolled courses:");
    const allCourses = JSON.parse(localStorage.getItem("enrolledCourses")) || [];

    const userCourses = allCourses.filter(course => course.email === email);

    const courseList = document.getElementById("courseList");

    if (userCourses.length === 0) {
      courseList.innerHTML = `<p>No courses found for <strong>${email}</strong>.</p>`;
    } else {
      userCourses.forEach(course => {
        const card = document.createElement("div");
        card.className = "col-md-4 mb-3";
        card.innerHTML = `
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title">${course.course}</h5>
              <p class="card-text"><strong>Email:</strong> ${course.email}</p>
              <button class="btn btn-primary" onclick="watchCourse('${course.course}')">Watch Now</button>
            </div>
          </div>
        `;
        courseList.appendChild(card);
      });
    }

    function watchCourse(courseName) {
      const videoContainer = document.getElementById("videoContainer");

      let videoURL = "";
      if (courseName === "Java") {
        videoURL = "https://www.youtube.com/embed/grEKMHGYyns";
      } else if (courseName === "Python") {
        videoURL = "https://www.youtube.com/embed/rfscVS0vtbw";
      } else if (courseName === "Web Development") {
        videoURL = "https://www.youtube.com/embed/UB1O30fR-EE";
      } else {
        videoContainer.innerHTML = "<p>No video available for this course.</p>";
        return;
      }

      videoContainer.innerHTML = `
        <h3>${courseName} Video</h3>
        <iframe width="560" height="315" src="${videoURL}" 
                frameborder="0" allowfullscreen></iframe>
      `;
    }
  </script>
</body>
</html>
